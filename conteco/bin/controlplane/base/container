#!/usr/bin/env bash
method=`basename "$0"`
arguments=$@
(
    export PATH="/conteco/bin/${CONTECO_TYPE}/${CONTECO_NAME}:/conteco/bin/${CONTECO_TYPE}/${CONTECO_NAME}/internal:/conteco/bin/${CONTECO_TYPE}/internal:$CONTECO_EXECUTIONPLANE_ORIGINALPATH"
    . executionplane-invoke "$0 $@"
    case "$1" in
		cp)
			.container $@
			;;
		create) # capture output in CONTECO_EXECUTIONPLANE_OUTPUT environment variable with executionplane-capture-output prefix
			.container $@
			;;
		prune)
			.container prune --force
			;;
        run)
            .container $@
            ;;
        *)
            executionplane-error "Method not recognised: $1."
            ;;
    esac
    executionplane-wait-for-output-parser
    executionplane-complete
)
