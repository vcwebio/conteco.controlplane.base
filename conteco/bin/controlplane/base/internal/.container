#!/usr/bin/env bash
(
    . executionplane-invoke "$0 $@"
    case "$1" in
		cp)
			executionplane docker $@
			;;
		create)
			executionplane-output docker $@
			;;
        invoke)
            docker container run -v $CONTECO_PWD_VOLUME:/conteco/pwd "$CONTECO_REALM/$CONTECO_ECOSYSTEM.$CONTECO_TYPE.$CONTECO_NAME" \
				--executiontag ${CONTECO_EXECUTIONTAG} --interactive .invoke $@
            ;;
		prune)
			executionplane docker container $@
			;;
        run)
            executionplane docker container $@
            ;;
        *)
            executionplane-error "Method not recognised: $1"
            ;;
    esac
    . executionplane-wait-for-output-parser
    . executionplane-complete
)