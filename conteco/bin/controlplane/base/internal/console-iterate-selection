#!/usr/bin/env bash
# ${@:2:$#-2}

selector="${@: -1}"
selection=$(cat /conteco/assets/image-list | grep "${CONTECO_ECOSYSTEM_RUNTIME}" | grep "$selector")
readarray -t items <<< "$selection"
  for item in ${items[@]};
  do
    current=$(pwd)
    cd "${CONTECO_REALM_RUNTIME}/$item"
    commandline="${@:1:$#-1}"
    if [[ "$commandline" == ".invoke console"* ]] ; then
      $commandline
    else
      $commandline "${CONTECO_REALM_RUNTIME}/$item"
    fi
    cd $current
  done;
