#!/usr/bin/env bash
selector=$1
shopt -s nullglob
pathExists="false"

if [[ $selector == *"$" ]] ; then
	selector="${selector::-1}"
fi

if [[ " extract " == *"$2"* ]] ; then
	for f in $selector* ;
	do
		if [[ "$f" == "$selector" ]] ; then
			pathExists=true
			break
		fi
	done;
else
	pathExists=true
fi

if [[ "$pathExists" == "false" ]] ; then
	withoutrealm=$( echo $selector | cut -d '/' -f 2)
	export CONTECO_TYPE=$( echo $withoutrealm | cut -d '.' -f 2)
	export CONTECO_NAME=$( echo $withoutrealm | cut -d '.' -f 3)
	export CONTECO_TAG=""
	export CONTECO_STATE="virtual"
fi
