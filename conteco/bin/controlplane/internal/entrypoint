#!/usr/bin/env bash
export PATH="/conteco/bin/controlplane:${PATH}"
export CONTECO_EXECUTIONPLANE_ORIGINALPATH="/conteco/bin/controlplane:$CONTECO_EXECUTIONPLANE_ORIGINALPATH"
export CONTECO_EXECUTIONPLANE_BASEPATH=$CONTECO_EXECUTIONPLANE_ORIGINALPATH

export CONTECO_EXECUTIONTAG=$(create-random)
export CONTECO_REPOSITORYPREFIX="${CONTECO_REALM}/${CONTECO_ECOSYSTEM}"

# Register APIs
for f in /conteco/bin/${CONTECO_TYPE}/* ;
do
	folder=$(basename $f)
	if [[ -d $f && "$folder" != "internal" && "$folder" != "image" ]] ; then
        envName="CONTECO_EXECUTIONPLANE_APIEXTERNALPATH_${folder^^}"
        export "$envName"="/conteco/bin/${CONTECO_TYPE}/$folder:${CONTECO_EXECUTIONPLANE_ORIGINALPATH}"
        envName="CONTECO_EXECUTIONPLANE_APIINTERNALPATH_${folder^^}"
        export "$envName"="/conteco/bin/${CONTECO_TYPE}/$folder:/conteco/bin/${CONTECO_TYPE}/$folder/internal:/conteco/bin/${CONTECO_TYPE}/internal:$CONTECO_EXECUTIONPLANE_ORIGINALPATH"
	fi
	done;
