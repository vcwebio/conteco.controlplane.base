#!/usr/bin/env bash
pwd_volume="$1"
if [[ "$pwd_volume" == *"\\"* ]] ; then
	pwd_volume=$( echo $pwd_volume | tr '\\' '\/' | tr -d ':' )
	pwd_volume="/${pwd_volume//\/\//\/}"
	pwd_volume="${pwd_volume,,}"
	export CONTECO_OS="windows"
else
	export CONTECO_OS="linux"
fi

# Runtime values for REALM and ECOSYSTEM
export CONTECO_REALM_RUNTIME="${CONTECO_REALM}"
if [[ "$2" != "" ]] ; then
	export CONTECO_REALM_RUNTIME="$2"
fi
export CONTECO_ECOSYSTEM_RUNTIME="${CONTECO_NAME}"

hostname="${CONTECO_HOSTNAME}"
if [[ "$hostname" = "host.docker.internal" ]] ; then
	hostname="linuxkit"
fi
export PS1="${CONTECO_HOSTNAME}:${CONTECO_NAME}#$ "
export CONTECO_PWD_VOLUME="$pwd_volume"
bash
